<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="sass/four.css">
</head>
<body>
    <header>
        <h1>GSAP Scroll test</h1>
      </header>
      
      <div class="wrap-detik">
          <h1>Buku Piala Bola Dunia Qatar 2022</h1>
          <p>Piala Bola dunia 2022 Qatar bisa menjadi panggung terakhir dari 2 GOAT(Greatest of All Time) dalam hampir 15 tahun terakhir. Mereka ialah Cristiano Ronaldo dan Lionel Messi, kedua pemain tersebut telah meraih banyak gelar baik individu maupun club, tetapi sama-sama belum pernah mencicipi gelar piala bola dunia. Akankah salah satu diantara mereka akan memenangkan nya? Atau mereka pulang tanpa piala bergengsi tersebut di penghujung karirnya? </p>
      </div>
      
      <div class="card endtrigger" id="card1">
        <div class="card__img-holder">
            <img src="img/player/cr7.png" alt="">
        </div>
        <div class="card__img-holder">
            <img src="img/player/messi.png" alt="">
        </div>
      </div>
      
      <div class="card endtrigger card--reverse" id="card2">
        <div class="card__img-holder"></div>
       <div class="card__text">
          <h2>Maskot-Maskot Piala Dunia</h2>
           <p>Maecenas sagittis tincidunt risus. In auctor nisl a neque elementum venenatis. In nec sagittis justo, non accumsan urna. Nunc at quam vestibulum, pharetra elit et, varius dolor. Maecenas elementum vitae sem vitae vehicula. Donec vel erat sem. Aliquam vulputate tortor eget ligula sollicitudin rutrum.
          </p>
        </div>
      </div>
      
      <div class="card endtrigger" id="card3">
        <div class="card__img-holder"></div>
       <div class="card__text">
          <h2>Test Card with endTrigger</h2>
          <p>Maecenas sagittis tincidunt risus. In auctor nisl a neque elementum venenatis. In nec sagittis justo, non accumsan urna. Nunc at quam vestibulum, pharetra elit et, varius dolor. Maecenas elementum vitae sem vitae vehicula. Donec vel erat sem. Aliquam vulputate tortor eget ligula sollicitudin rutrum.
          </p>
        </div>
      </div>
      
      <h1>Cards with 'end' set to the next cards height</h1>
      
      <div class="card height">
        <div class="card__img-holder"></div>
        <div class="card__text">
          <h2>Test Card with next cards height</h2>
          <p>Maecenas sagittis tincidunt risus. In auctor nisl a neque elementum venenatis. In nec sagittis justo, non accumsan urna. Nunc at quam vestibulum, pharetra elit et, varius dolor. Maecenas elementum vitae sem vitae vehicula. Donec vel erat sem. Aliquam vulputate tortor eget ligula sollicitudin rutrum.
          </p>
        </div>
      </div>
      
      <div class="card height card--reverse">
        <div class="card__img-holder"></div>
       <div class="card__text">
          <h2>Test Card with next cards height</h2>
           <p>Maecenas sagittis tincidunt risus. In auctor nisl a neque elementum venenatis. In nec sagittis justo, non accumsan urna. Nunc at quam vestibulum, pharetra elit et, varius dolor. Maecenas elementum vitae sem vitae vehicula. Donec vel erat sem. Aliquam vulputate tortor eget ligula sollicitudin rutrum.
          </p>
        </div>
      </div>
      
      <div class="card height">
        <div class="card__img-holder"></div>
       <div class="card__text">
          <h2>Test Card with next cards height</h2>
          <p>Maecenas sagittis tincidunt risus. In auctor nisl a neque elementum venenatis. In nec sagittis justo, non accumsan urna. Nunc at quam vestibulum, pharetra elit et, varius dolor. Maecenas elementum vitae sem vitae vehicula. Donec vel erat sem. Aliquam vulputate tortor eget ligula sollicitudin rutrum.
          </p>
        </div>
      </div>
      
      <h1>Cards with 'end' set to the next cards height and text has line breaks</h1>
      
      <div class="card break">
        <div class="card__img-holder"></div>
        <div class="card__text">
          <h2>Test Card with next cards height and line breaks</h2>
          <p>Maecenas sagittis tincidunt risus. In auctor nisl a neque elementum venenatis. In nec sagittis justo, non accumsan urna. Nunc at quam vestibulum, pharetra elit et, varius dolor. <br><br> Maecenas elementum vitae sem vitae vehicula. Donec vel erat sem. Aliquam vulputate tortor eget ligula sollicitudin rutrum.
          </p>
        </div>
      </div>
      
      <div class="card break card--reverse">
        <div class="card__img-holder"></div>
       <div class="card__text">
          <h2>Test Card with next cards height and line breaks</h2>
           <p>Maecenas sagittis tincidunt risus. In auctor nisl a neque elementum venenatis. In nec sagittis justo, non accumsan urna. Nunc at quam vestibulum, pharetra elit et, varius dolor. Maecenas elementum vitae sem vitae vehicula. Donec vel erat sem. Aliquam vulputate tortor eget ligula sollicitudin rutrum.
          </p>
        </div>
      </div>
      
      <div class="card break">
        <div class="card__img-holder"></div>
       <div class="card__text">
          <h2>Test Card with next cards height and line breaks</h2>
          <p>Maecenas sagittis tincidunt risus. In auctor nisl a neque elementum venenatis. In nec sagittis justo, non accumsan urna. Nunc at quam vestibulum, pharetra elit et, varius dolor. <br><br> Maecenas elementum vitae sem vitae vehicula. Donec vel erat sem. Aliquam vulputate tortor eget ligula sollicitudin rutrum.
          </p>
        </div>
      </div>
      
      <footer>
        <h2>This is the end</h2>
      </footer>
      <script src="js/jquery-3.5.1.min.js"></script>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/ScrollTrigger.min.js"></script>

      <script>
        gsap.registerPlugin(ScrollTrigger);

var targetsEndTrigger = document.querySelectorAll(".endtrigger");

var targetsHeight = document.querySelectorAll(".height");

var targetsBreak = document.querySelectorAll(".break");

targetsEndTrigger.forEach((target, index) => {
  const pinSpacing = index === targetsEndTrigger.length - 1 ? "true" : false;
  const endTrigger = `#card${index + 1}`
  const opacityFirst = index === 0 ? 1 : 0;
  const opacitySecond = index === targetsEndTrigger.length - 1 ? 1 : 0;
  const tl = gsap
    .timeline({
      defaults: { duration: 1 },
      scrollTrigger: {
        trigger: target,
        pin: true,
        scrub: true,
        start: "center center",
        // end,
        endTrigger,
        markers: true,
        toggleActions: "restart none reverse reset",
        pinSpacing,
      },
    })
    .from(target, { opacity: opacityFirst, duration: 0.2 }, 0)
    .to(target, { opacity: opacitySecond, duration: 0.2 }, 0.8);
});

targetsHeight.forEach((target, index) => {
  const pinSpacing = index === targetsHeight.length - 1 ? "true" : false;
  const end =
    index === targetsHeight.length - 1
      ? `+=${target.offsetHeight}px`
      : `+=${targetsHeight[index + 1].offsetHeight}px`;
  const opacityFirst = index === 0 ? 1 : 0;
  const opacitySecond = index === targetsHeight.length - 1 ? 1 : 0;
  const tl = gsap
    .timeline({
      defaults: { duration: 1 },
      scrollTrigger: {
        trigger: target,
        pin: true,
        scrub: true,
        start: "center center",
        end,
        markers: true,
        toggleActions: "restart none reverse reset",
        pinSpacing,
      },
    })
    .from(target, { opacity: opacityFirst, duration: 0.2 }, 0)
    .to(target, { opacity: opacitySecond, duration: 0.2 }, 0.8);
});

targetsBreak.forEach((target, index) => {
  const pinSpacing = index === targetsBreak.length - 1 ? "true" : false;
  const end =
    index === targetsBreak.length - 1
      ? `+=${target.offsetHeight}px`
      : `+=${targetsBreak[index + 1].offsetHeight}px`;
  const opacityFirst = index === 0 ? 1 : 0;
  const opacitySecond = index === targetsBreak.length - 1 ? 1 : 0;
  const tl = gsap
    .timeline({
      defaults: { duration: 1 },
      scrollTrigger: {
        trigger: target,
        pin: true,
        scrub: true,
        start: "center center",
        end,
        markers: true,
        toggleActions: "restart none reverse reset",
        pinSpacing,
      },
    })
    .from(target, { opacity: opacityFirst, duration: 0.2 }, 0)
    .to(target, { opacity: opacitySecond, duration: 0.2 }, 0.8);
});
      </script>
</body>
</html>